package controller;

import java.util.Calendar;
import javax.swing.JOptionPane;
import conv.ConventionException;
import epi.Project;
import model.CreateProjectModel;
import view.CreateProjectView;

public class CreateProjectController {
	private CreateProjectView 	_view;
	private CreateProjectModel 	_model;

	public void init(){
		int result = JOptionPane.showConfirmDialog(null, _view,"New project",JOptionPane.OK_CANCEL_OPTION,JOptionPane.PLAIN_MESSAGE);
		
		if(result==JOptionPane.OK_OPTION){
			
			Project project;
			try {
				project = new Project(0, _view.get_projectNameTxtField().getText(),Calendar.getInstance().get(Calendar.YEAR),Integer.valueOf(_view.get_versionComboBox().getSelectedItem().toString()),Calendar.getInstance().getTime());
				_model.create_project(project.get_folder_name());
				
			} catch (NumberFormatException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			} catch (ConventionException e) {
				JOptionPane.showMessageDialog(null, e.getMessage(),"Error",JOptionPane.ERROR_MESSAGE);
			} catch (Exception e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
		}
	}

	
	public CreateProjectController() {
		this._view = new CreateProjectView();
		this._model = CreateProjectModel.getInstance();
	}
	public CreateProjectView get_view() {
		return _view;
	}
	public void set_view(CreateProjectView _view) {
		this._view = _view;
	}
	public CreateProjectModel get_model() {
		return _model;
	}
	public void set_model(CreateProjectModel _model) {
		this._model = _model;
	}
}
