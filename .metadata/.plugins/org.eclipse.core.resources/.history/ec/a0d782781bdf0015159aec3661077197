package controller;

import java.util.Calendar;

import javax.swing.JOptionPane;

import app.Project;
import conv.ConventionException;
import model.CreateProjectModel;
import view.CreateProjectView;

public class CreateProjectController {
	private CreateProjectView 	_view;
	private CreateProjectModel 	_model;

	public void init(){
		int result = JOptionPane.showConfirmDialog(null, _view,"New project",JOptionPane.OK_CANCEL_OPTION,JOptionPane.PLAIN_MESSAGE);
		
		if(result==JOptionPane.OK_OPTION){
			try {
				_model.create_project(new Project(0, _view.get_projectNameTxtField().getText(),Calendar.getInstance().get(Calendar.YEAR),Integer.valueOf(_view.get_versionComboBox().getSelectedItem().toString()),Calendar.getInstance().getTime(),_view.get_fullNameTxtField().getText(),_view.get_emailTxtField().getText()));
			} catch (Exception e1) {
				JOptionPane.showMessageDialog(null, e1.getMessage(),"Error",JOptionPane.ERROR_MESSAGE);
				e1.printStackTrace();
			}
		}
	}

	
	public CreateProjectController() {
		this._view = new CreateProjectView();
		this._model = CreateProjectModel.getInstance();
	}
	public CreateProjectView get_view() {
		return _view;
	}
	public void set_view(CreateProjectView _view) {
		this._view = _view;
	}
	public CreateProjectModel get_model() {
		return _model;
	}
	public void set_model(CreateProjectModel _model) {
		this._model = _model;
	}
}
