package controller;

import java.io.IOException;
import java.io.InputStream;
import java.rmi.NotBoundException;
import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;
import java.util.Arrays;
import java.util.Properties;
import java.util.Vector;

import javax.swing.JOptionPane;
import javax.swing.event.TreeSelectionEvent;
import javax.swing.event.TreeSelectionListener;
import javax.swing.tree.DefaultTreeModel;
import javax.swing.tree.TreeNode;
import javax.swing.tree.TreePath;

import app.ProjectManagerInterface;
import model.SyncModel;
import view.SyncView;

public class SyncController {
	
	private SyncView _view;
	private SyncModel _model;
	
	public SyncController() throws IOException, NotBoundException{
		_view = new SyncView();
		_model = new SyncModel();
	}

	public void show() throws IOException, NotBoundException {
		
		DefaultTreeModel model = (DefaultTreeModel)_view.get_scratchTree().getModel();
		model.setRoot((TreeNode) _model.get_stub().getScratchTreeStructure().getModel().getRoot());
		
		_model.get_stub().getArchiveTreeStructure().getModel().getRoot();
		model = (DefaultTreeModel)_view.get_archiveTree().getModel();
		model.setRoot((TreeNode) _model.get_stub().getArchiveTreeStructure().getModel().getRoot());
		
		int result = JOptionPane.showConfirmDialog(null, _view,"Sync folder",JOptionPane.OK_CANCEL_OPTION,JOptionPane.PLAIN_MESSAGE);
		
		if(result==JOptionPane.OK_OPTION){
			_model.sendRequest(_view.get_scratchTree().getSelectionPaths());
		}
	}

}
